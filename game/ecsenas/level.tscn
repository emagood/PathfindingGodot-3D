[gd_scene load_steps=12 format=3 uid="uid://vu1yij55ytji"]

[ext_resource type="PackedScene" uid="uid://bdtquhglkka1i" path="res://game/ecsenas/player.tscn" id="1_052lw"]
[ext_resource type="Script" path="res://game/script/rotator.gd" id="2_esqor"]
[ext_resource type="PackedScene" uid="uid://qrhe7tc3vj21" path="res://game/ecsenas/navigation_npc.tscn" id="3_bjdnm"]
[ext_resource type="Script" path="res://game/script/navigation_npc_2.gd" id="4_vas4x"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_d1q45"]
sky_top_color = Color(0.523297, 0.887932, 0.993308, 1)
sky_curve = 0.00686289
ground_bottom_color = Color(0.207843, 0.568627, 0.568627, 1)
ground_horizon_color = Color(0.603922, 0.976471, 1, 1)

[sub_resource type="Sky" id="Sky_snld3"]
sky_material = SubResource("ProceduralSkyMaterial_d1q45")

[sub_resource type="Environment" id="Environment_4dlet"]
background_mode = 2
sky = SubResource("Sky_snld3")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_2tnt6"]
vertices = PackedVector3Array(-10.25, 0.324342, -9.5, -8.25, 0.324342, -15, -8.25, 0.324342, -16, -11.5, 0.324342, -9.5, -9.75, 0.324342, -9, 11.75, 0.574342, 0.5, 12.25, 0.324342, -5.75, 12.25, 0.324342, -7, 1.25, 0.574342, 0.5, 14, 0.324342, -5.25, 12.75, 0.324342, 0.5, -19.75, 0.324342, -6.5, 4, 0.324342, -6.75, 4, 0.324342, -5.5, -9.75, 0.324342, -7.5, -4.75, 0.324342, 3, 2.25, 0.324342, -4.75, -16.5, 0.324342, 3.25, -18, 0.324342, -4.5, -19.5, 0.324342, -4.75, -24.5, 0.324342, 5.5, -16.25, 0.324342, 5.25, -4.5, 0.324342, 5, 0.5, 0.324342, 5.5, 0.25, 0.324342, 0.5, 12.5, 0.324342, 5.5, 24.5, 0.324342, 5.5, 21.5, 0.324342, -14.25, -24.5, 0.324342, -24.5, 24.5, 0.324342, -24.5, 21.5, 0.324342, -15, 1.25, 3.82434, 7.5, 11.75, 3.82434, 7.5, 19.5, 0.324342, -15.75, 20.75, 0.324342, -15.75, -6.5, 0.324342, -17, -7.25, 0.324342, -17, 3.25, 0.324342, -4.75, -7, 4.32434, -15.75, -7, 4.32434, -15.25, -4, 4.32434, -12.25, -3.5, 4.32434, -12.25, 19.5, 4.32434, -14.25, 19.5, 4.32434, -13.75, 20.25, 4.32434, -14.25, 20, 4.32434, -14.75, 18.25, 4.32434, -12.75, 18.25, 4.32434, -12.25, 19, 4.32434, -12.75, 18.75, 4.32434, -13.25, 17, 4.32434, -11.25, 17.25, 4.32434, -10.75, 18, 4.32434, -11.5, 17.75, 4.32434, -12, 16, 4.32434, -10, 16, 4.32434, -9.5, 16.75, 4.32434, -10, 16.5, 4.32434, -10.5, 2.5, 4.32434, -6, 3, 4.32434, -6, -0.5, 4.32434, -9.75, -1, 4.32434, -9.75, 14.75, 4.32434, -8.5, 14.75, 4.32434, -8, 15.5, 4.32434, -8.5, 15.25, 4.32434, -9, 13.5, 4.32434, -7, 13.5, 4.32434, -6.5, 14.25, 4.32434, -7, 14, 4.32434, -7.5, -22.25, 0.324342, 10, -21.75, 0.324342, 9.5, -22.25, 0.324342, 11.25, -24.5, 0.324342, 24.5, -19.75, 0.324342, 10, -0.75, 0.324342, 18.25, -1, 0.324342, 16.75, -10, 0.324342, 18, -10, 0.324342, 19, 0.25, 0.324342, 10.25, 2.25, 0.324342, 10, -10.75, 0.324342, 17.25, -10.75, 0.324342, 20, -15, 0.324342, 14.25, 1.25, 0.324342, 18.25, 24.5, 0.324342, 24.5, 2.5, 0.324342, 11.5, -21, 0.324342, 12.5, -11.75, 0.324342, 20)
polygons = [PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(4, 0, 1), PackedInt32Array(6, 5, 7), PackedInt32Array(7, 5, 8), PackedInt32Array(10, 5, 9), PackedInt32Array(9, 5, 6), PackedInt32Array(2, 3, 11), PackedInt32Array(7, 13, 12), PackedInt32Array(4, 1, 14), PackedInt32Array(14, 1, 16), PackedInt32Array(14, 16, 15), PackedInt32Array(18, 17, 19), PackedInt32Array(19, 17, 21), PackedInt32Array(19, 21, 20), PackedInt32Array(24, 23, 22), PackedInt32Array(10, 9, 25), PackedInt32Array(25, 9, 26), PackedInt32Array(26, 9, 27), PackedInt32Array(19, 20, 11), PackedInt32Array(11, 20, 28), PackedInt32Array(30, 29, 27), PackedInt32Array(27, 29, 26), PackedInt32Array(22, 23, 21), PackedInt32Array(21, 23, 20), PackedInt32Array(5, 32, 8), PackedInt32Array(8, 32, 31), PackedInt32Array(34, 33, 29), PackedInt32Array(29, 33, 35), PackedInt32Array(29, 35, 28), PackedInt32Array(18, 14, 17), PackedInt32Array(17, 14, 15), PackedInt32Array(35, 36, 28), PackedInt32Array(29, 30, 34), PackedInt32Array(16, 37, 15), PackedInt32Array(15, 37, 22), PackedInt32Array(7, 12, 33), PackedInt32Array(33, 12, 35), PackedInt32Array(2, 11, 36), PackedInt32Array(36, 11, 28), PackedInt32Array(13, 24, 37), PackedInt32Array(37, 24, 22), PackedInt32Array(24, 13, 8), PackedInt32Array(8, 13, 7), PackedInt32Array(39, 38, 40), PackedInt32Array(40, 38, 41), PackedInt32Array(45, 44, 42), PackedInt32Array(42, 44, 43), PackedInt32Array(49, 48, 46), PackedInt32Array(46, 48, 47), PackedInt32Array(53, 52, 50), PackedInt32Array(50, 52, 51), PackedInt32Array(57, 56, 54), PackedInt32Array(54, 56, 55), PackedInt32Array(61, 60, 58), PackedInt32Array(58, 60, 59), PackedInt32Array(65, 64, 62), PackedInt32Array(62, 64, 63), PackedInt32Array(69, 68, 66), PackedInt32Array(66, 68, 67), PackedInt32Array(71, 70, 20), PackedInt32Array(70, 72, 20), PackedInt32Array(20, 72, 73), PackedInt32Array(74, 71, 20), PackedInt32Array(77, 76, 78), PackedInt32Array(78, 76, 75), PackedInt32Array(79, 23, 80), PackedInt32Array(80, 23, 25), PackedInt32Array(76, 77, 81), PackedInt32Array(82, 78, 75), PackedInt32Array(81, 83, 74), PackedInt32Array(75, 84, 82), PackedInt32Array(82, 84, 73), PackedInt32Array(73, 84, 85), PackedInt32Array(79, 76, 23), PackedInt32Array(23, 76, 81), PackedInt32Array(23, 81, 74), PackedInt32Array(23, 74, 20), PackedInt32Array(86, 25, 84), PackedInt32Array(84, 25, 26), PackedInt32Array(84, 26, 85), PackedInt32Array(73, 72, 87), PackedInt32Array(73, 87, 88), PackedInt32Array(73, 88, 82), PackedInt32Array(86, 80, 25)]
sample_partition_type = 2
agent_height = 2.0
edge_max_length = 0.5
detail_sample_distance = 16.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8bv7i"]
albedo_color = Color(0.517647, 1, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bcds8"]
albedo_color = Color(0.635294, 0.823529, 0.952941, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0eatf"]
albedo_color = Color(0.219608, 0.156863, 0.254902, 1)

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_4dlet")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
visible = false
shadow_enabled = true

[node name="Player" parent="." instance=ExtResource("1_052lw")]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.107658, 0.00326347, -0.221822)
navigation_mesh = SubResource("NavigationMesh_2tnt6")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1.41296, 0, 0, 0, 1.2096, -0.908435, 0, 2.62865, 0.418026, 6.45966, 1.20285, 2.90413)
use_collision = true
flip_faces = true
size = Vector3(8.01379, 3.85791, 0.0996094)
material = SubResource("StandardMaterial3D_8bv7i")

[node name="Ground" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
use_collision = true
size = Vector3(50, 1, 50)
material = SubResource("StandardMaterial3D_bcds8")

[node name="obstacles" type="Node3D" parent="NavigationRegion3D/Ground"]

[node name="box 1" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.499, 2.5, 4.011)
use_collision = true
size = Vector3(10.755, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="box 2" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(0.719267, 0, -0.694734, 0, 1, 0, 0.694734, 0, 0.719267, -2.093, 2.5, -10.849)
use_collision = true
size = Vector3(14.535, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="box 3" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(0.948457, 0, 0.316907, 0, 1, 0, -0.316907, 0, 0.948457, -14.707, 2.5, -6.994)
use_collision = true
size = Vector3(8.965, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="box 4" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(-0.637115, 0, -0.770769, 0, 1, 0, 0.770769, 0, -0.637115, 16.784, 2.5, -10.511)
use_collision = true
size = Vector3(11.44, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="box 5" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(-0.162448, 0, -0.986717, 0, 1, 0, 0.986717, 0, -0.162448, 0.755, 2.5, 14.166)
use_collision = true
size = Vector3(7.161, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="box 6" type="CSGBox3D" parent="NavigationRegion3D/Ground/obstacles"]
transform = Transform3D(-0.777212, 0, 0.629239, 0, 1, 0, -0.629239, 0, -0.777212, -16.178, 2.5, 14.646)
use_collision = true
size = Vector3(13.5, 4, 1)
material = SubResource("StandardMaterial3D_0eatf")

[node name="Camera Pivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 15.9037, 0)
script = ExtResource("2_esqor")

[node name="Camera3D" type="Camera3D" parent="Camera Pivot"]
transform = Transform3D(1, 0, 0, 0, 0.00193705, 0.999998, 0, -0.999998, 0.00193705, 0, 11.5147, -0.871895)
fov = 83.4

[node name="NPCs" type="Node3D" parent="."]

[node name="Nav NPC 1" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.19424, 2.38419e-07, -7.873)
script = ExtResource("4_vas4x")

[node name="Nav NPC 2" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.6635, 2.38419e-07, -7.873)
script = ExtResource("4_vas4x")

[node name="Nav NPC 3" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.60503, 2.38419e-07, -7.873)
script = ExtResource("4_vas4x")

[node name="Nav NPC 4" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.13314, 2.38419e-07, -7.873)
script = ExtResource("4_vas4x")

[node name="Nav NPC 5" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.68564, 2.38419e-07, 10.8417)
script = ExtResource("4_vas4x")

[node name="Nav NPC 6" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.07572, 3.29174, 6.50483)
script = ExtResource("4_vas4x")

[node name="Nav NPC 7" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.85641, 5.47438, 7.10882)
floor_block_on_wall = false
script = ExtResource("4_vas4x")

[node name="Nav NPC 8" parent="NPCs" instance=ExtResource("3_bjdnm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.85641, 2.38419e-07, 7.10882)
script = ExtResource("4_vas4x")
